{"remainingRequest":"D:\\a\\ant-design-vue-jeecg\\node_modules\\babel-loader\\lib\\index.js!D:\\a\\ant-design-vue-jeecg\\node_modules\\cache-loader\\dist\\cjs.js??ref--0-0!D:\\a\\ant-design-vue-jeecg\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\a\\ant-design-vue-jeecg\\src\\components\\jeecg\\JVxeTable\\components\\cells\\JVxeDepartSelectCell.vue?vue&type=script&lang=js&","dependencies":[{"path":"D:\\a\\ant-design-vue-jeecg\\src\\components\\jeecg\\JVxeTable\\components\\cells\\JVxeDepartSelectCell.vue","mtime":1661074531190},{"path":"D:\\a\\ant-design-vue-jeecg\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1657458637011},{"path":"D:\\a\\ant-design-vue-jeecg\\node_modules\\babel-loader\\lib\\index.js","mtime":1657458618345},{"path":"D:\\a\\ant-design-vue-jeecg\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1657458637011},{"path":"D:\\a\\ant-design-vue-jeecg\\node_modules\\vue-loader\\lib\\index.js","mtime":1657458571653}],"contextDependencies":[],"result":["function ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\nimport JVxeCellMixins, { dispatchEvent } from '@/components/jeecg/JVxeTable/mixins/JVxeCellMixins';\nimport JSelectDepartModal from '@/components/jeecgbiz/modal/JSelectDepartModal';\nexport default {\n  name: 'JVxeDepartSelectCell',\n  mixins: [JVxeCellMixins],\n  components: {\n    JSelectDepartModal: JSelectDepartModal\n  },\n  data: function data() {\n    return {\n      departNames: '',\n      departIds: '',\n      selectedOptions: [],\n      customReturnField: 'id'\n    };\n  },\n  computed: {\n    custProps: function custProps() {\n      var departIds = this.departIds,\n          col = this.originColumn,\n          caseId = this.caseId,\n          cellProps = this.cellProps;\n      return _objectSpread(_objectSpread({}, cellProps), {}, {\n        value: departIds,\n        field: col.field || col.key,\n        groupId: caseId,\n        class: 'jvxe-select'\n      });\n    },\n    componentDisabled: function componentDisabled() {\n      if (this.cellProps.disabled == true) {\n        return true;\n      }\n\n      return false;\n    },\n    modalWidth: function modalWidth() {\n      if (this.cellProps.modalWidth) {\n        return this.cellProps.modalWidth;\n      } else {\n        return 500;\n      }\n    },\n    multi: function multi() {\n      if (this.cellProps.multi == false || this.originColumn.multi === false) {\n        return false;\n      } else {\n        return true;\n      }\n    },\n    rootOpened: function rootOpened() {\n      if (this.cellProps.open == false) {\n        return false;\n      } else {\n        return true;\n      }\n    }\n  },\n  watch: {\n    innerValue: {\n      immediate: true,\n      handler: function handler(val) {\n        if (val == null || val === '') {\n          this.departIds = '';\n        } else {\n          this.departIds = val;\n        }\n      }\n    }\n  },\n  methods: {\n    openSelect: function openSelect() {\n      // disabled 不弹窗\n      if (this.componentDisabled) {\n        return;\n      }\n\n      this.$refs.innerDepartSelectModal.show();\n    },\n    handleEmpty: function handleEmpty() {\n      this.handleOK('');\n    },\n    handleOK: function handleOK(rows) {\n      var value = '';\n\n      if (!rows && rows.length <= 0) {\n        this.departNames = '';\n        this.departIds = '';\n      } else {\n        var storeField = this.storeField();\n        var textField = this.textField();\n        value = rows.map(function (row) {\n          return row[storeField];\n        }).join(',');\n        this.departNames = rows.map(function (row) {\n          return row[textField];\n        }).join(',');\n        this.departIds = value;\n      }\n\n      this.handleChangeCommon(this.departIds);\n    },\n    initComp: function initComp(departNames) {\n      this.departNames = departNames;\n    },\n    handleChange: function handleChange(value) {\n      this.handleChangeCommon(value);\n    },\n    storeField: function storeField() {\n      if (this.originColumn) {\n        var str = this.originColumn.fieldExtendJson;\n\n        if (str) {\n          var json = JSON.parse(str);\n\n          if (json && json.store) {\n            return json.store;\n          }\n        } else if (this.originColumn.store) {\n          return this.originColumn.store;\n        }\n      }\n\n      return 'id';\n    },\n    textField: function textField() {\n      if (this.originColumn) {\n        var str = this.originColumn.fieldExtendJson;\n\n        if (str) {\n          var json = JSON.parse(str);\n\n          if (json && json.text) {\n            return json.text;\n          }\n        } else if (this.originColumn.text) {\n          return this.originColumn.text;\n        }\n      }\n\n      return 'departName';\n    }\n  },\n  enhanced: {\n    switches: {\n      visible: true\n    },\n    translate: {\n      enabled: false\n    }\n  }\n};",{"version":3,"sources":["JVxeDepartSelectCell.vue"],"names":[],"mappings":"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","sourcesContent":["<template>\r\n  <div>\r\n      <a-input\r\n        v-show=\"!departIds\"\r\n        @click=\"openSelect\"\r\n        placeholder=\"请点击选择部门\"\r\n        v-model=\"departNames\"\r\n        readOnly\r\n        :disabled=\"componentDisabled\"\r\n        class=\"jvxe-select-input\">\r\n        <a-icon slot=\"prefix\" type=\"cluster\" title=\"部门选择控件\"/>\r\n      </a-input>\r\n      <j-select-depart-modal\r\n        ref=\"innerDepartSelectModal\"\r\n        :modal-width=\"modalWidth\"\r\n        :multi=\"multi\"\r\n        :rootOpened=\"rootOpened\"\r\n        :depart-id=\"departIds\"\r\n        :store=\"storeField()\"\r\n        :text=\"textField()\"\r\n        @ok=\"handleOK\"\r\n        @initComp=\"initComp\"/>\r\n    <span style=\"display: inline-block;height:100%;padding-left:14px\" v-if=\"departIds\" >\r\n      <span @click=\"openSelect\" style=\"display: inline-block;vertical-align: middle\">{{ departNames }}</span>\r\n      <a-icon v-if=\"!componentDisabled\" style=\"margin-left:5px;vertical-align: middle\" type=\"close-circle\" @click=\"handleEmpty\" title=\"清空\"/>\r\n    </span>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\n  import JVxeCellMixins, { dispatchEvent } from '@/components/jeecg/JVxeTable/mixins/JVxeCellMixins'\r\n  import JSelectDepartModal from '@/components/jeecgbiz/modal/JSelectDepartModal'\r\n\r\n  export default {\r\n    name: 'JVxeDepartSelectCell',\r\n    mixins: [JVxeCellMixins],\r\n    components:{\r\n      JSelectDepartModal\r\n    },\r\n    data() {\r\n      return {\r\n        departNames: '',\r\n        departIds: '',\r\n        selectedOptions: [],\r\n        customReturnField: 'id'\r\n      }\r\n    },\r\n    computed: {\r\n      custProps() {\r\n        const {departIds, originColumn: col, caseId, cellProps} = this\r\n        return {\r\n          ...cellProps,\r\n          value: departIds,\r\n          field: col.field || col.key,\r\n          groupId: caseId,\r\n          class: 'jvxe-select'\r\n        }\r\n      },\r\n      componentDisabled(){\r\n        if(this.cellProps.disabled==true){\r\n          return true\r\n        }\r\n        return false\r\n      },\r\n      modalWidth(){\r\n        if(this.cellProps.modalWidth){\r\n          return this.cellProps.modalWidth\r\n        }else{\r\n          return 500\r\n        }\r\n      },\r\n      multi(){\r\n        if(this.cellProps.multi==false || this.originColumn.multi===false){\r\n          return false\r\n        }else{\r\n          return true\r\n        }\r\n      },\r\n      rootOpened(){\r\n        if(this.cellProps.open==false){\r\n          return false\r\n        }else{\r\n          return true\r\n        }\r\n      }\r\n    },\r\n    watch: {\r\n      innerValue: {\r\n        immediate: true,\r\n        handler(val) {\r\n          if (val == null || val === '') {\r\n            this.departIds = ''\r\n          } else {\r\n            this.departIds = val\r\n          }\r\n        }\r\n      }\r\n    },\r\n    methods: {\r\n      openSelect(){\r\n        // disabled 不弹窗\r\n        if (this.componentDisabled) {\r\n          return\r\n        }\r\n        this.$refs.innerDepartSelectModal.show()\r\n      },\r\n      handleEmpty(){\r\n        this.handleOK('')\r\n      },\r\n      handleOK(rows) {\r\n        let value = ''\r\n        if (!rows && rows.length <= 0) {\r\n          this.departNames = ''\r\n          this.departIds = ''\r\n        } else {\r\n          let storeField = this.storeField();\r\n          let textField = this.textField();\r\n          value = rows.map(row => row[storeField]).join(',')\r\n          this.departNames = rows.map(row => row[textField]).join(',')\r\n          this.departIds = value\r\n        }\r\n        this.handleChangeCommon(this.departIds)\r\n      },\r\n      initComp(departNames){\r\n        this.departNames = departNames\r\n      },\r\n      handleChange(value) {\r\n        this.handleChangeCommon(value)\r\n      },\r\n      storeField(){\r\n        if(this.originColumn){\r\n          const str = this.originColumn.fieldExtendJson\r\n          if(str){\r\n            let json = JSON.parse(str)\r\n            if(json && json.store){\r\n              return json.store\r\n            }\r\n          }else if(this.originColumn.store){\r\n            return this.originColumn.store\r\n          }\r\n        }\r\n        return 'id'\r\n      },\r\n      textField(){\r\n        if(this.originColumn){\r\n          const str = this.originColumn.fieldExtendJson\r\n          if(str){\r\n            let json = JSON.parse(str)\r\n            if(json && json.text){\r\n              return json.text\r\n            }\r\n          }else if(this.originColumn.text){\r\n            return this.originColumn.text\r\n          }\r\n        }\r\n        return 'departName'\r\n      }\r\n    },\r\n    enhanced: {\r\n      switches: {\r\n        visible: true\r\n      },\r\n      translate: {\r\n        enabled: false\r\n      }\r\n    }\r\n  }\r\n</script>\r\n\r\n<style scoped>\r\n  /deep/ .jvxe-select-input .ant-input{\r\n    border: none !important;\r\n  }\r\n</style>"],"sourceRoot":"src/components/jeecg/JVxeTable/components/cells"}]}