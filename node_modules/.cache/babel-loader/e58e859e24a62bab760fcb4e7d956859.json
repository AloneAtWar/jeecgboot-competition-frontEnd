{"remainingRequest":"D:\\a\\ant-design-vue-jeecg\\node_modules\\babel-loader\\lib\\index.js!D:\\a\\ant-design-vue-jeecg\\node_modules\\cache-loader\\dist\\cjs.js??ref--0-0!D:\\a\\ant-design-vue-jeecg\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\a\\ant-design-vue-jeecg\\src\\views\\jeecg\\TableOrderTotal.vue?vue&type=script&lang=js&","dependencies":[{"path":"D:\\a\\ant-design-vue-jeecg\\src\\views\\jeecg\\TableOrderTotal.vue","mtime":1661074531276},{"path":"D:\\a\\ant-design-vue-jeecg\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1657458637011},{"path":"D:\\a\\ant-design-vue-jeecg\\node_modules\\babel-loader\\lib\\index.js","mtime":1657458618345},{"path":"D:\\a\\ant-design-vue-jeecg\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1657458637011},{"path":"D:\\a\\ant-design-vue-jeecg\\node_modules\\vue-loader\\lib\\index.js","mtime":1657458571653}],"contextDependencies":[],"result":["import _regeneratorRuntime from \"D:/a/ant-design-vue-jeecg/node_modules/@babel/runtime/regenerator\";\n\nfunction asyncGeneratorStep(gen, resolve, reject, _next, _throw, key, arg) { try { var info = gen[key](arg); var value = info.value; } catch (error) { reject(error); return; } if (info.done) { resolve(value); } else { Promise.resolve(value).then(_next, _throw); } }\n\nfunction _asyncToGenerator(fn) { return function () { var self = this, args = arguments; return new Promise(function (resolve, reject) { var gen = fn.apply(self, args); function _next(value) { asyncGeneratorStep(gen, resolve, reject, _next, _throw, \"next\", value); } function _throw(err) { asyncGeneratorStep(gen, resolve, reject, _next, _throw, \"throw\", err); } _next(undefined); }); }; }\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\nexport default {\n  name: 'TableTotal',\n  data: function data() {\n    return {\n      columns: [{\n        title: '#',\n        width: '180px',\n        align: 'center',\n        dataIndex: 'rowIndex',\n        customRender: function customRender(text, r, index) {\n          return text !== '总计' ? parseInt(index) + 1 : text;\n        }\n      }, {\n        title: '姓名',\n        dataIndex: 'name',\n        width: 180\n      }, {\n        title: '贡献点',\n        dataIndex: 'point',\n        width: 180\n      }, {\n        title: '等级',\n        dataIndex: 'level',\n        width: 180\n      }, {\n        title: '更新时间',\n        dataIndex: 'updateTime',\n        width: 180\n      }],\n\n      /* 分页参数 */\n      ipagination: {\n        current: 1,\n        pageSize: 10\n      },\n      dataSource: [{\n        id: \"1\",\n        name: '张三',\n        point: 23,\n        level: 3,\n        updateTime: '2019-8-14'\n      }, {\n        name: '小王',\n        point: 6,\n        level: 1,\n        updateTime: '2019-8-13'\n      }, {\n        name: '李四',\n        point: 53,\n        level: 8,\n        updateTime: '2019-8-12'\n      }, {\n        name: '小红',\n        point: 44,\n        level: 5,\n        updateTime: '2019-8-11'\n      }, {\n        name: '王五',\n        point: 97,\n        level: 10,\n        updateTime: '2019-8-10'\n      }, {\n        name: '小明',\n        point: 33,\n        level: 2,\n        updateTime: '2019-8-10'\n      }, {\n        name: '小张',\n        point: 33,\n        level: 2,\n        updateTime: '2019-8-10'\n      }, {\n        name: '小六',\n        point: 33,\n        level: 2,\n        updateTime: '2019-8-10'\n      }, {\n        name: '小五',\n        point: 33,\n        level: 2,\n        updateTime: '2019-8-10'\n      }, {\n        name: '小赵',\n        point: 33,\n        level: 2,\n        updateTime: '2019-8-10'\n      }, {\n        name: '李华',\n        point: 33,\n        level: 2,\n        updateTime: '2019-8-10'\n      }, {\n        name: '小康',\n        point: 33,\n        level: 2,\n        updateTime: '2019-8-10'\n      }, {\n        name: '小鹿',\n        point: 33,\n        level: 2,\n        updateTime: '2019-8-10'\n      }],\n      newArr: [],\n      newDataSource: [],\n      footerDataSource: [],\n      pageSwitch: true\n    };\n  },\n  computed: {\n    // 数据表格的固定属性\n    tableProps: function tableProps() {\n      var _this = this;\n\n      var tableProps = {\n        size: 'middle',\n        rowKey: 'rowIndex',\n        columns: this.columns,\n        scroll: {\n          x: true\n        }\n      };\n      var renderFooter = this.footerDataSource.length === 0 ? null : function () {\n        return _this.renderTableFooter(tableProps);\n      };\n      return _objectSpread(_objectSpread({}, tableProps), {}, {\n        ref: 'table',\n        class: 'chart-data-list',\n        pagination: this.pageSwitch ? this.ipagination : false,\n        columns: this.columns,\n        dataSource: this.dataSource,\n        footer: renderFooter\n      });\n    },\n    pageSwitchProps: function pageSwitchProps() {\n      return {\n        checkedChildren: '分页',\n        unCheckedChildren: '分页',\n        style: {\n          position: 'absolute',\n          right: '0px',\n          top: '-10px'\n        }\n      };\n    }\n  },\n  mounted: function mounted() {\n    // this.tableAddTotalRow(this.columns, this.dataSource)\n\n    /*新增分页合计方法*/\n    this.newDataSource = this.dataSource;\n    this.dataHandling(1, this.ipagination.pageSize);\n  },\n  watch: {\n    //update-begin---author:wangshuai ---date:20220209  for：[JTC-494]常用示例->表格合计写法改成新的写法------------\n    'pageSwitch': function pageSwitch(val) {\n      if (!val) {\n        this.dataHandling('-1', 0);\n      } else {\n        this.dataHandling(1, this.ipagination.pageSize);\n      }\n    },\n    'ipagination.current': function ipaginationCurrent(val) {\n      this.dataHandling(val, this.ipagination.pageSize);\n    },\n    //当合计行变化时，绑定滚动条\n    'footerDataSource': {\n      handler: function () {\n        var _handler = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee(dataSource) {\n          var dom, footerDom;\n          return _regeneratorRuntime.wrap(function _callee$(_context) {\n            while (1) {\n              switch (_context.prev = _context.next) {\n                case 0:\n                  if (!(dataSource && dataSource.length > 0)) {\n                    _context.next = 6;\n                    break;\n                  }\n\n                  _context.next = 3;\n                  return this.$nextTick();\n\n                case 3:\n                  // 同步表与footer滚动\n                  dom = this.$refs.table.$el.querySelectorAll('.ant-table-body')[0];\n                  footerDom = this.$refs.footerTable.$el.querySelectorAll('.ant-table-body')[0];\n                  dom.addEventListener('scroll', function () {\n                    footerDom.scrollLeft = dom.scrollLeft;\n                  }, true);\n\n                case 6:\n                case \"end\":\n                  return _context.stop();\n              }\n            }\n          }, _callee, this);\n        }));\n\n        function handler(_x) {\n          return _handler.apply(this, arguments);\n        }\n\n        return handler;\n      }() //update-end---author:wangshuai ---date:20220209  for：[JTC-494]常用示例->表格合计写法改成新的写法------------\n\n    }\n  },\n  methods: {\n    /** 表格增加合计行 */\n    tableAddTotalRow: function tableAddTotalRow(columns, dataSource) {\n      var numKey = 'rowIndex';\n\n      var totalRow = _defineProperty({}, numKey, '合计');\n\n      columns.forEach(function (column) {\n        var key = column.key,\n            dataIndex = column.dataIndex;\n\n        if (![key, dataIndex].includes(numKey)) {\n          var total = 0;\n          dataSource.forEach(function (data) {\n            total += /^\\d+\\.?\\d?$/.test(data[dataIndex]) ? Number.parseInt(data[dataIndex]) : Number.NaN;\n            console.log(data[dataIndex], ':', /^\\d+\\.?\\d?$/.test(data[dataIndex]) ? Number.parseInt(data[dataIndex]) : Number.NaN);\n          });\n\n          if (Number.isNaN(total)) {\n            total = '-';\n          }\n\n          totalRow[dataIndex] = total;\n        }\n      });\n      dataSource.push(totalRow);\n    },\n    handleTableChange: function handleTableChange(pagination, filters, sorter) {\n      this.ipagination = pagination;\n    },\n    //update-begin---author:wangshuai ---date:20220209  for：[JTC-494]常用示例->表格合计写法改成新的写法------------\n\n    /*如果分页走这个方法*/\n    dataHandling: function dataHandling(pageNo, pageSize) {\n      //根据当前页数和每页显示条数分割数组\n      var arrs = []; //如果pageNo不是-1（不分页）,那么需要对数据进行分页计算\n\n      if (pageNo != -1) {\n        arrs = this.newDataSource.slice((pageNo - 1) * pageSize, pageNo * pageSize);\n      } else {\n        arrs = this.newDataSource;\n      }\n\n      var newDataSource = [];\n      var newArr = {};\n      newArr.rowIndex = \"总计\";\n      var level = 0;\n      var point = 0; //每一项的数值相加\n\n      for (var j = 0; j < arrs.length; j++) {\n        level += arrs[j].level;\n        point += arrs[j].point;\n      }\n\n      newArr.level = level;\n      newArr.point = point;\n      newDataSource.push(newArr); //给foot底部数组赋值\n\n      this.footerDataSource = newDataSource;\n    },\n    // 渲染表格底部合计行\n    renderTableFooter: function renderTableFooter(tableProps) {\n      var h = this.$createElement;\n      return h('a-table', {\n        ref: 'footerTable',\n        props: _objectSpread(_objectSpread({}, tableProps), {}, {\n          pagination: false,\n          dataSource: this.footerDataSource,\n          showHeader: false\n        })\n      }); //update-end---author:wangshuai ---date:20220209  for：[JTC-494]常用示例->表格合计写法改成新的写法------------\n    }\n  }\n};",{"version":3,"sources":["TableOrderTotal.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAmBA,eAAA;AACA,EAAA,IAAA,EAAA,YADA;AAEA,EAAA,IAFA,kBAEA;AACA,WAAA;AACA,MAAA,OAAA,EAAA,CACA;AACA,QAAA,KAAA,EAAA,GADA;AAEA,QAAA,KAAA,EAAA,OAFA;AAGA,QAAA,KAAA,EAAA,QAHA;AAIA,QAAA,SAAA,EAAA,UAJA;AAKA,QAAA,YAAA,EAAA,sBAAA,IAAA,EAAA,CAAA,EAAA,KAAA,EAAA;AACA,iBAAA,IAAA,KAAA,IAAA,GAAA,QAAA,CAAA,KAAA,CAAA,GAAA,CAAA,GAAA,IAAA;AACA;AAPA,OADA,EAUA;AACA,QAAA,KAAA,EAAA,IADA;AAEA,QAAA,SAAA,EAAA,MAFA;AAGA,QAAA,KAAA,EAAA;AAHA,OAVA,EAeA;AACA,QAAA,KAAA,EAAA,KADA;AAEA,QAAA,SAAA,EAAA,OAFA;AAGA,QAAA,KAAA,EAAA;AAHA,OAfA,EAoBA;AACA,QAAA,KAAA,EAAA,IADA;AAEA,QAAA,SAAA,EAAA,OAFA;AAGA,QAAA,KAAA,EAAA;AAHA,OApBA,EAyBA;AACA,QAAA,KAAA,EAAA,MADA;AAEA,QAAA,SAAA,EAAA,YAFA;AAGA,QAAA,KAAA,EAAA;AAHA,OAzBA,CADA;;AAgCA;AACA,MAAA,WAAA,EAAA;AACA,QAAA,OAAA,EAAA,CADA;AAEA,QAAA,QAAA,EAAA;AAFA,OAjCA;AAqCA,MAAA,UAAA,EAAA,CACA;AAAA,QAAA,EAAA,EAAA,GAAA;AAAA,QAAA,IAAA,EAAA,IAAA;AAAA,QAAA,KAAA,EAAA,EAAA;AAAA,QAAA,KAAA,EAAA,CAAA;AAAA,QAAA,UAAA,EAAA;AAAA,OADA,EAEA;AAAA,QAAA,IAAA,EAAA,IAAA;AAAA,QAAA,KAAA,EAAA,CAAA;AAAA,QAAA,KAAA,EAAA,CAAA;AAAA,QAAA,UAAA,EAAA;AAAA,OAFA,EAGA;AAAA,QAAA,IAAA,EAAA,IAAA;AAAA,QAAA,KAAA,EAAA,EAAA;AAAA,QAAA,KAAA,EAAA,CAAA;AAAA,QAAA,UAAA,EAAA;AAAA,OAHA,EAIA;AAAA,QAAA,IAAA,EAAA,IAAA;AAAA,QAAA,KAAA,EAAA,EAAA;AAAA,QAAA,KAAA,EAAA,CAAA;AAAA,QAAA,UAAA,EAAA;AAAA,OAJA,EAKA;AAAA,QAAA,IAAA,EAAA,IAAA;AAAA,QAAA,KAAA,EAAA,EAAA;AAAA,QAAA,KAAA,EAAA,EAAA;AAAA,QAAA,UAAA,EAAA;AAAA,OALA,EAMA;AAAA,QAAA,IAAA,EAAA,IAAA;AAAA,QAAA,KAAA,EAAA,EAAA;AAAA,QAAA,KAAA,EAAA,CAAA;AAAA,QAAA,UAAA,EAAA;AAAA,OANA,EAOA;AAAA,QAAA,IAAA,EAAA,IAAA;AAAA,QAAA,KAAA,EAAA,EAAA;AAAA,QAAA,KAAA,EAAA,CAAA;AAAA,QAAA,UAAA,EAAA;AAAA,OAPA,EAQA;AAAA,QAAA,IAAA,EAAA,IAAA;AAAA,QAAA,KAAA,EAAA,EAAA;AAAA,QAAA,KAAA,EAAA,CAAA;AAAA,QAAA,UAAA,EAAA;AAAA,OARA,EASA;AAAA,QAAA,IAAA,EAAA,IAAA;AAAA,QAAA,KAAA,EAAA,EAAA;AAAA,QAAA,KAAA,EAAA,CAAA;AAAA,QAAA,UAAA,EAAA;AAAA,OATA,EAUA;AAAA,QAAA,IAAA,EAAA,IAAA;AAAA,QAAA,KAAA,EAAA,EAAA;AAAA,QAAA,KAAA,EAAA,CAAA;AAAA,QAAA,UAAA,EAAA;AAAA,OAVA,EAWA;AAAA,QAAA,IAAA,EAAA,IAAA;AAAA,QAAA,KAAA,EAAA,EAAA;AAAA,QAAA,KAAA,EAAA,CAAA;AAAA,QAAA,UAAA,EAAA;AAAA,OAXA,EAYA;AAAA,QAAA,IAAA,EAAA,IAAA;AAAA,QAAA,KAAA,EAAA,EAAA;AAAA,QAAA,KAAA,EAAA,CAAA;AAAA,QAAA,UAAA,EAAA;AAAA,OAZA,EAaA;AAAA,QAAA,IAAA,EAAA,IAAA;AAAA,QAAA,KAAA,EAAA,EAAA;AAAA,QAAA,KAAA,EAAA,CAAA;AAAA,QAAA,UAAA,EAAA;AAAA,OAbA,CArCA;AAoDA,MAAA,MAAA,EAAA,EApDA;AAqDA,MAAA,aAAA,EAAA,EArDA;AAsDA,MAAA,gBAAA,EAAA,EAtDA;AAuDA,MAAA,UAAA,EAAA;AAvDA,KAAA;AAyDA,GA5DA;AA6DA,EAAA,QAAA,EAAA;AACA;AACA,IAAA,UAFA,wBAEA;AAAA;;AACA,UAAA,UAAA,GAAA;AACA,QAAA,IAAA,EAAA,QADA;AAEA,QAAA,MAAA,EAAA,UAFA;AAGA,QAAA,OAAA,EAAA,KAAA,OAHA;AAIA,QAAA,MAAA,EAAA;AAAA,UAAA,CAAA,EAAA;AAAA;AAJA,OAAA;AAMA,UAAA,YAAA,GAAA,KAAA,gBAAA,CAAA,MAAA,KAAA,CAAA,GAAA,IAAA,GAAA;AAAA,eAAA,KAAA,CAAA,iBAAA,CAAA,UAAA,CAAA;AAAA,OAAA;AACA,6CACA,UADA;AAEA,QAAA,GAAA,EAAA,OAFA;AAGA,QAAA,KAAA,EAAA,iBAHA;AAIA,QAAA,UAAA,EAAA,KAAA,UAAA,GAAA,KAAA,WAAA,GAAA,KAJA;AAKA,QAAA,OAAA,EAAA,KAAA,OALA;AAMA,QAAA,UAAA,EAAA,KAAA,UANA;AAOA,QAAA,MAAA,EAAA;AAPA;AASA,KAnBA;AAoBA,IAAA,eApBA,6BAoBA;AACA,aAAA;AACA,QAAA,eAAA,EAAA,IADA;AAEA,QAAA,iBAAA,EAAA,IAFA;AAGA,QAAA,KAAA,EAAA;AACA,UAAA,QAAA,EAAA,UADA;AAEA,UAAA,KAAA,EAAA,KAFA;AAGA,UAAA,GAAA,EAAA;AAHA;AAHA,OAAA;AASA;AA9BA,GA7DA;AA6FA,EAAA,OA7FA,qBA6FA;AACA;;AACA;AACA,SAAA,aAAA,GAAA,KAAA,UAAA;AACA,SAAA,YAAA,CAAA,CAAA,EAAA,KAAA,WAAA,CAAA,QAAA;AACA,GAlGA;AAmGA,EAAA,KAAA,EAAA;AACA;AACA,kBAAA,oBAAA,GAAA,EAAA;AACA,UAAA,CAAA,GAAA,EAAA;AACA,aAAA,YAAA,CAAA,IAAA,EAAA,CAAA;AACA,OAFA,MAEA;AACA,aAAA,YAAA,CAAA,CAAA,EAAA,KAAA,WAAA,CAAA,QAAA;AACA;AACA,KARA;AASA,2BAAA,4BAAA,GAAA,EAAA;AACA,WAAA,YAAA,CAAA,GAAA,EAAA,KAAA,WAAA,CAAA,QAAA;AACA,KAXA;AAYA;AACA,wBAAA;AACA,MAAA,OADA;AAAA,iGACA,UADA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,wBAGA,UAAA,IAAA,UAAA,CAAA,MAAA,GAAA,CAHA;AAAA;AAAA;AAAA;;AAAA;AAAA,yBAIA,KAAA,SAAA,EAJA;;AAAA;AAKA;AACA,kBAAA,GANA,GAMA,KAAA,KAAA,CAAA,KAAA,CAAA,GAAA,CAAA,gBAAA,CAAA,iBAAA,EAAA,CAAA,CANA;AAOA,kBAAA,SAPA,GAOA,KAAA,KAAA,CAAA,WAAA,CAAA,GAAA,CAAA,gBAAA,CAAA,iBAAA,EAAA,CAAA,CAPA;AAQA,kBAAA,GAAA,CAAA,gBAAA,CACA,QADA,EAEA,YAAA;AACA,oBAAA,SAAA,CAAA,UAAA,GAAA,GAAA,CAAA,UAAA;AACA,mBAJA,EAKA,IALA;;AARA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;AAAA;AAAA;AAAA;;AAAA;AAAA,UAiBA;;AAjBA;AAbA,GAnGA;AAoIA,EAAA,OAAA,EAAA;AACA;AACA,IAAA,gBAFA,4BAEA,OAFA,EAEA,UAFA,EAEA;AACA,UAAA,MAAA,GAAA,UAAA;;AACA,UAAA,QAAA,uBAAA,MAAA,EAAA,IAAA,CAAA;;AACA,MAAA,OAAA,CAAA,OAAA,CAAA,UAAA,MAAA,EAAA;AAAA,YACA,GADA,GACA,MADA,CACA,GADA;AAAA,YACA,SADA,GACA,MADA,CACA,SADA;;AAEA,YAAA,CAAA,CAAA,GAAA,EAAA,SAAA,EAAA,QAAA,CAAA,MAAA,CAAA,EAAA;AAEA,cAAA,KAAA,GAAA,CAAA;AACA,UAAA,UAAA,CAAA,OAAA,CAAA,UAAA,IAAA,EAAA;AACA,YAAA,KAAA,IAAA,cAAA,IAAA,CAAA,IAAA,CAAA,SAAA,CAAA,IAAA,MAAA,CAAA,QAAA,CAAA,IAAA,CAAA,SAAA,CAAA,CAAA,GAAA,MAAA,CAAA,GAAA;AACA,YAAA,OAAA,CAAA,GAAA,CAAA,IAAA,CAAA,SAAA,CAAA,EAAA,GAAA,EAAA,cAAA,IAAA,CAAA,IAAA,CAAA,SAAA,CAAA,IAAA,MAAA,CAAA,QAAA,CAAA,IAAA,CAAA,SAAA,CAAA,CAAA,GAAA,MAAA,CAAA,GAAA;AACA,WAHA;;AAKA,cAAA,MAAA,CAAA,KAAA,CAAA,KAAA,CAAA,EAAA;AACA,YAAA,KAAA,GAAA,GAAA;AACA;;AACA,UAAA,QAAA,CAAA,SAAA,CAAA,GAAA,KAAA;AACA;AACA,OAfA;AAiBA,MAAA,UAAA,CAAA,IAAA,CAAA,QAAA;AACA,KAvBA;AAwBA,IAAA,iBAxBA,6BAwBA,UAxBA,EAwBA,OAxBA,EAwBA,MAxBA,EAwBA;AACA,WAAA,WAAA,GAAA,UAAA;AACA,KA1BA;AA2BA;;AACA;AACA,IAAA,YA7BA,wBA6BA,MA7BA,EA6BA,QA7BA,EA6BA;AACA;AACA,UAAA,IAAA,GAAA,EAAA,CAFA,CAGA;;AACA,UAAA,MAAA,IAAA,CAAA,CAAA,EAAA;AACA,QAAA,IAAA,GAAA,KAAA,aAAA,CAAA,KAAA,CAAA,CAAA,MAAA,GAAA,CAAA,IAAA,QAAA,EAAA,MAAA,GAAA,QAAA,CAAA;AACA,OAFA,MAEA;AACA,QAAA,IAAA,GAAA,KAAA,aAAA;AACA;;AACA,UAAA,aAAA,GAAA,EAAA;AACA,UAAA,MAAA,GAAA,EAAA;AACA,MAAA,MAAA,CAAA,QAAA,GAAA,IAAA;AACA,UAAA,KAAA,GAAA,CAAA;AACA,UAAA,KAAA,GAAA,CAAA,CAbA,CAcA;;AACA,WAAA,IAAA,CAAA,GAAA,CAAA,EAAA,CAAA,GAAA,IAAA,CAAA,MAAA,EAAA,CAAA,EAAA,EAAA;AACA,QAAA,KAAA,IAAA,IAAA,CAAA,CAAA,CAAA,CAAA,KAAA;AACA,QAAA,KAAA,IAAA,IAAA,CAAA,CAAA,CAAA,CAAA,KAAA;AACA;;AACA,MAAA,MAAA,CAAA,KAAA,GAAA,KAAA;AACA,MAAA,MAAA,CAAA,KAAA,GAAA,KAAA;AACA,MAAA,aAAA,CAAA,IAAA,CAAA,MAAA,EArBA,CAsBA;;AACA,WAAA,gBAAA,GAAA,aAAA;AACA,KArDA;AAsDA;AACA,IAAA,iBAvDA,6BAuDA,UAvDA,EAuDA;AACA,UAAA,CAAA,GAAA,KAAA,cAAA;AACA,aAAA,CAAA,CAAA,SAAA,EAAA;AACA,QAAA,GAAA,EAAA,aADA;AAEA,QAAA,KAAA,kCACA,UADA;AAEA,UAAA,UAAA,EAAA,KAFA;AAGA,UAAA,UAAA,EAAA,KAAA,gBAHA;AAIA,UAAA,UAAA,EAAA;AAJA;AAFA,OAAA,CAAA,CAFA,CAWA;AACA;AAnEA;AApIA,CAAA","sourcesContent":["<template>\r\n  <a-card :bordered=\"false\">\r\n    <a-row>\r\n      <a-col>\r\n        <a-switch v-bind=\"pageSwitchProps\" v-model=\"pageSwitch\"/>\r\n      </a-col>\r\n      <a-col>\r\n        <a-table\r\n            v-bind=\"tableProps\"\r\n            @change=\"handleTableChange\"\r\n            style=\"margin-top: 20px\"\r\n        >\r\n        </a-table>\r\n      </a-col>\r\n    </a-row>\r\n  </a-card>\r\n</template>\r\n\r\n<script>\r\n  export default {\r\n    name: 'TableTotal',\r\n    data() {\r\n      return {\r\n        columns: [\r\n          {\r\n            title: '#',\r\n            width: '180px',\r\n            align: 'center',\r\n            dataIndex: 'rowIndex',\r\n            customRender: function (text, r, index) {\r\n              return (text !== '总计') ? (parseInt(index) + 1) : text\r\n            }\r\n          },\r\n          {\r\n            title: '姓名',\r\n            dataIndex: 'name',\r\n            width: 180,\r\n          },\r\n          {\r\n            title: '贡献点',\r\n            dataIndex: 'point',\r\n            width: 180,\r\n          },\r\n          {\r\n            title: '等级',\r\n            dataIndex: 'level',\r\n            width: 180,\r\n          },\r\n          {\r\n            title: '更新时间',\r\n            dataIndex: 'updateTime',\r\n            width: 180,\r\n          },\r\n        ],\r\n        /* 分页参数 */\r\n        ipagination:{\r\n          current: 1,\r\n          pageSize: 10,\r\n        },\r\n        dataSource: [\r\n          { id:\"1\",name: '张三', point: 23, level: 3, updateTime: '2019-8-14' },\r\n          { name: '小王', point: 6, level: 1, updateTime: '2019-8-13' },\r\n          { name: '李四', point: 53, level: 8, updateTime: '2019-8-12' },\r\n          { name: '小红', point: 44, level: 5, updateTime: '2019-8-11' },\r\n          { name: '王五', point: 97, level: 10, updateTime: '2019-8-10' },\r\n          { name: '小明', point: 33, level: 2, updateTime: '2019-8-10' },\r\n          { name: '小张', point: 33, level: 2, updateTime: '2019-8-10' },\r\n          { name: '小六', point: 33, level: 2, updateTime: '2019-8-10' },\r\n          { name: '小五', point: 33, level: 2, updateTime: '2019-8-10' },\r\n          { name: '小赵', point: 33, level: 2, updateTime: '2019-8-10' },\r\n          { name: '李华', point: 33, level: 2, updateTime: '2019-8-10' },\r\n          { name: '小康', point: 33, level: 2, updateTime: '2019-8-10' },\r\n          { name: '小鹿', point: 33, level: 2, updateTime: '2019-8-10' },\r\n        ],\r\n        newArr:[],\r\n        newDataSource:[],\r\n        footerDataSource: [],\r\n        pageSwitch:true\r\n      }\r\n    },\r\n    computed:{\r\n      // 数据表格的固定属性\r\n      tableProps(){\r\n        let tableProps = {\r\n          size: 'middle',\r\n          rowKey:'rowIndex',\r\n          columns: this.columns,\r\n          scroll: {x: true},\r\n        }\r\n        let renderFooter = this.footerDataSource.length === 0 ? null : () => this.renderTableFooter(tableProps)\r\n        return {\r\n          ...tableProps,\r\n          ref: 'table',\r\n          class: 'chart-data-list',\r\n          pagination:this.pageSwitch?this.ipagination:false,\r\n          columns: this.columns,\r\n          dataSource: this.dataSource,\r\n          footer: renderFooter,\r\n        }\r\n      },\r\n      pageSwitchProps() {\r\n        return {\r\n          checkedChildren: '分页',\r\n          unCheckedChildren: '分页',\r\n          style: {\r\n            position: 'absolute',\r\n            right: '0px',\r\n            top: '-10px'\r\n          }\r\n        }\r\n      },\r\n    },\r\n    mounted() {\r\n      // this.tableAddTotalRow(this.columns, this.dataSource)\r\n      /*新增分页合计方法*/\r\n      this.newDataSource=this.dataSource\r\n      this.dataHandling(1,this.ipagination.pageSize)\r\n    },\r\n    watch:{\r\n      //update-begin---author:wangshuai ---date:20220209  for：[JTC-494]常用示例->表格合计写法改成新的写法------------\r\n      'pageSwitch':function(val){\r\n         if(!val){\r\n           this.dataHandling('-1',0)\r\n         }else{\r\n           this.dataHandling(1,this.ipagination.pageSize)\r\n         }\r\n      },\r\n      'ipagination.current':function(val) {\r\n        this.dataHandling(val,this.ipagination.pageSize)\r\n      },\r\n      //当合计行变化时，绑定滚动条\r\n      'footerDataSource': {\r\n        async handler(dataSource) {\r\n          // 当底部合计行有值，并且显示出来时，再同步滚动条\r\n          if (dataSource && dataSource.length > 0) {\r\n            await this.$nextTick()\r\n            // 同步表与footer滚动\r\n            let dom = this.$refs.table.$el.querySelectorAll('.ant-table-body')[0]\r\n            let footerDom = this.$refs.footerTable.$el.querySelectorAll('.ant-table-body')[0]\r\n            dom.addEventListener(\r\n                'scroll',\r\n                () => {\r\n                  footerDom.scrollLeft = dom.scrollLeft\r\n                },\r\n                true,\r\n            )\r\n          }\r\n        },\r\n        //update-end---author:wangshuai ---date:20220209  for：[JTC-494]常用示例->表格合计写法改成新的写法------------\r\n      }\r\n    },\r\n    methods: {\r\n      /** 表格增加合计行 */\r\n      tableAddTotalRow(columns, dataSource) {\r\n        let numKey = 'rowIndex'\r\n        let totalRow = { [numKey]: '合计' }\r\n        columns.forEach(column => {\r\n          let { key, dataIndex } = column\r\n          if (![key, dataIndex].includes(numKey)) {\r\n\r\n            let total = 0\r\n            dataSource.forEach(data => {\r\n              total += /^\\d+\\.?\\d?$/.test(data[dataIndex]) ? Number.parseInt(data[dataIndex]) : Number.NaN\r\n              console.log(data[dataIndex], ':', (/^\\d+\\.?\\d?$/.test(data[dataIndex]) ? Number.parseInt(data[dataIndex]) : Number.NaN))\r\n            })\r\n\r\n            if (Number.isNaN(total)) {\r\n              total = '-'\r\n            }\r\n            totalRow[dataIndex] = total\r\n          }\r\n        })\r\n\r\n        dataSource.push(totalRow)\r\n      },\r\n      handleTableChange(pagination, filters, sorter) {\r\n        this.ipagination = pagination;\r\n      },\r\n      //update-begin---author:wangshuai ---date:20220209  for：[JTC-494]常用示例->表格合计写法改成新的写法------------\r\n      /*如果分页走这个方法*/\r\n      dataHandling(pageNo,pageSize) {\r\n        //根据当前页数和每页显示条数分割数组\r\n        let arrs = [];\r\n        //如果pageNo不是-1（不分页）,那么需要对数据进行分页计算\r\n        if(pageNo!=-1){\r\n          arrs = this.newDataSource.slice((pageNo-1)*pageSize,pageNo*pageSize)\r\n        }else{\r\n          arrs = this.newDataSource\r\n        }\r\n        let newDataSource=[];\r\n        let newArr= { };\r\n        newArr.rowIndex=\"总计\"\r\n        let level=0;\r\n        let point=0;\r\n        //每一项的数值相加\r\n        for (let j=0;j<arrs.length;j++){\r\n          level+=arrs[j].level;\r\n          point+=arrs[j].point;\r\n        }\r\n        newArr.level=level;\r\n        newArr.point=point;\r\n        newDataSource.push(newArr);\r\n        //给foot底部数组赋值\r\n        this.footerDataSource = newDataSource;\r\n      },\r\n      // 渲染表格底部合计行\r\n      renderTableFooter(tableProps) {\r\n        let h = this.$createElement\r\n        return h('a-table', {\r\n          ref: 'footerTable',\r\n          props: {\r\n            ...tableProps,\r\n            pagination: false,\r\n            dataSource: this.footerDataSource,\r\n            showHeader: false,\r\n          },\r\n        })\r\n        //update-end---author:wangshuai ---date:20220209  for：[JTC-494]常用示例->表格合计写法改成新的写法------------\r\n      }\r\n    }\r\n  }\r\n</script>\r\n\r\n<style scoped lang=\"less\">\r\n/deep/ .chart-data-list .ant-table-footer .ant-table-body{\r\n  overflow: hidden !important;\r\n}\r\n/deep/ .ant-table-footer{\r\n  padding:0;\r\n}\r\n</style>"],"sourceRoot":"src/views/jeecg"}]}