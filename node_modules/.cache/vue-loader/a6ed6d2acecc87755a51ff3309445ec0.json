{"remainingRequest":"D:\\a\\ant-design-vue-jeecg\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\a\\ant-design-vue-jeecg\\src\\components\\jeecg\\JAreaLinkage.vue?vue&type=style&index=0&id=7d6a815f&lang=less&scoped=true&","dependencies":[{"path":"D:\\a\\ant-design-vue-jeecg\\src\\components\\jeecg\\JAreaLinkage.vue","mtime":1661074531164},{"path":"D:\\a\\ant-design-vue-jeecg\\node_modules\\css-loader\\index.js","mtime":1657458574837},{"path":"D:\\a\\ant-design-vue-jeecg\\node_modules\\vue-loader\\lib\\loaders\\stylePostLoader.js","mtime":1657458571653},{"path":"D:\\a\\ant-design-vue-jeecg\\node_modules\\postcss-loader\\src\\index.js","mtime":1657458638287},{"path":"D:\\a\\ant-design-vue-jeecg\\node_modules\\less-loader\\dist\\cjs.js","mtime":1657458655181},{"path":"D:\\a\\ant-design-vue-jeecg\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1657458637011},{"path":"D:\\a\\ant-design-vue-jeecg\\node_modules\\vue-loader\\lib\\index.js","mtime":1657458571653}],"contextDependencies":[],"result":["\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n.j-area-linkage {\n  height:40px;\n  /deep/ .area-cascader-wrap .area-select {\n    width: 100%;\n  }\n\n  /deep/ .area-select .area-selected-trigger {\n    line-height: 1.15;\n  }\n}\n\n",{"version":3,"sources":["JAreaLinkage.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAsJA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA","file":"JAreaLinkage.vue","sourceRoot":"src/components/jeecg","sourcesContent":["<template>\r\n  <div class=\"j-area-linkage\">\r\n    <div v-if=\"reloading\">\r\n      <span> Reloading... </span>\r\n    </div>\r\n    <area-cascader\r\n      v-else-if=\"_type === enums.type[0]\"\r\n      :value=\"innerValue\"\r\n      :data=\"pcaa\"\r\n      :level=\"1\"\r\n      :style=\"{width}\"\r\n      v-bind=\"$attrs\"\r\n      v-on=\"_listeners\"\r\n      @change=\"handleChange\"\r\n    />\r\n    <area-select\r\n      v-else-if=\"_type === enums.type[1]\"\r\n      :value=\"innerValue\"\r\n      :data=\"pcaa\"\r\n      :level=\"2\"\r\n      v-bind=\"$attrs\"\r\n      v-on=\"_listeners\"\r\n      @change=\"handleChange\"\r\n    />\r\n    <div v-else>\r\n      <span style=\"color:red;\"> Bad type value: {{_type}}</span>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\n  import Area from '@/components/_util/Area'\r\n\r\n  export default {\r\n    name: 'JAreaLinkage',\r\n    props: {\r\n      value: {\r\n        type: String,\r\n        required:false\r\n      },\r\n      // 组件的类型，可选值：\r\n      // select 下拉样式\r\n      // cascader 级联样式（默认）\r\n      type: {\r\n        type: String,\r\n        default: 'cascader'\r\n      },\r\n      width: {\r\n        type: String,\r\n        default: '100%'\r\n      }\r\n    },\r\n    data() {\r\n      return {\r\n        pcaa: this.$Jpcaa,\r\n        innerValue: [],\r\n        usedListeners: ['change'],\r\n        enums: {\r\n          type: ['cascader', 'select']\r\n        },\r\n        reloading: false,\r\n        areaData:''\r\n      }\r\n    },\r\n    computed: {\r\n      _listeners() {\r\n        let listeners = { ...this.$listeners }\r\n        // 去掉已使用的事件，防止冲突\r\n        this.usedListeners.forEach(key => {\r\n          delete listeners[key]\r\n        })\r\n        return listeners\r\n      },\r\n      _type() {\r\n        if (this.enums.type.includes(this.type)) {\r\n          return this.type\r\n        } else {\r\n          console.error(`JAreaLinkage的type属性只能接收指定的值（${this.enums.type.join('|')}）`)\r\n          return this.enums.type[0]\r\n        }\r\n      },\r\n    },\r\n    watch: {\r\n      value: {\r\n        immediate: true,\r\n        handler() {\r\n          this.loadDataByValue(this.value)\r\n        }\r\n      },\r\n    },\r\n    created() {\r\n      this.initAreaData();\r\n    },\r\n    methods: {\r\n\r\n      /** 重新加载组件 */\r\n      reload() {\r\n        this.reloading = true\r\n        this.$nextTick(() => this.reloading = false)\r\n      },\r\n\r\n      /** 通过 value 反推 options */\r\n      loadDataByValue(value) {\r\n        if (!value || value.length === 0) {\r\n          this.innerValue = []\r\n        } else {\r\n          this.initAreaData()\r\n          let arr = this.areaData.getRealCode(value)\r\n          this.innerValue = arr\r\n        }\r\n        this.reload()\r\n      },\r\n      /** 通过地区code获取子级 */\r\n      loadDataByCode(value) {\r\n        let options = []\r\n        let data = this.pcaa[value]\r\n        if (data) {\r\n          for (let key in data) {\r\n            if (data.hasOwnProperty(key)) {\r\n              options.push({ value: key, label: data[key], })\r\n            }\r\n          }\r\n          return options\r\n        } else {\r\n          return []\r\n        }\r\n      },\r\n      /** 判断是否有子节点 */\r\n      hasChildren(options) {\r\n        options.forEach(option => {\r\n          let data = this.loadDataByCode(option.value)\r\n          option.isLeaf = data.length === 0\r\n        })\r\n      },\r\n      handleChange(values) {\r\n        let value = values[values.length - 1]\r\n        this.$emit('change', value)\r\n      },\r\n      initAreaData(){\r\n        if(!this.areaData){\r\n          this.areaData = new Area(this.$Jpcaa);\r\n        }\r\n      },\r\n\r\n    },\r\n    model: { prop: 'value', event: 'change' },\r\n  }\r\n</script>\r\n\r\n<style lang=\"less\" scoped>\r\n  .j-area-linkage {\r\n    height:40px;\r\n    /deep/ .area-cascader-wrap .area-select {\r\n      width: 100%;\r\n    }\r\n\r\n    /deep/ .area-select .area-selected-trigger {\r\n      line-height: 1.15;\r\n    }\r\n  }\r\n\r\n</style>"]}]}