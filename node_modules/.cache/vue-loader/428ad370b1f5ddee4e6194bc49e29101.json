{"remainingRequest":"D:\\a\\ant-design-vue-jeecg\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\a\\ant-design-vue-jeecg\\src\\components\\jeecg\\JVxeTable\\components\\cells\\JVxeUserSelectCell.vue?vue&type=style&index=0&id=4eb37cde&scoped=true&lang=css&","dependencies":[{"path":"D:\\a\\ant-design-vue-jeecg\\src\\components\\jeecg\\JVxeTable\\components\\cells\\JVxeUserSelectCell.vue","mtime":1661074531194},{"path":"D:\\a\\ant-design-vue-jeecg\\node_modules\\css-loader\\index.js","mtime":1657458574837},{"path":"D:\\a\\ant-design-vue-jeecg\\node_modules\\vue-loader\\lib\\loaders\\stylePostLoader.js","mtime":1657458571653},{"path":"D:\\a\\ant-design-vue-jeecg\\node_modules\\postcss-loader\\src\\index.js","mtime":1657458638287},{"path":"D:\\a\\ant-design-vue-jeecg\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1657458637011},{"path":"D:\\a\\ant-design-vue-jeecg\\node_modules\\vue-loader\\lib\\index.js","mtime":1657458571653}],"contextDependencies":[],"result":["\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n/deep/ .jvxe-select-input .ant-input {\n  border: none !important;\n}\n",{"version":3,"sources":["JVxeUserSelectCell.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA8JA;AACA;AACA","file":"JVxeUserSelectCell.vue","sourceRoot":"src/components/jeecg/JVxeTable/components/cells","sourcesContent":["<template>\r\n  <div>\r\n    <a-input\r\n      v-show=\"!userIds\"\r\n      @click=\"openSelect\"\r\n      placeholder=\"请选择用户\"\r\n      v-model=\"userNames\"\r\n      readOnly\r\n      class=\"jvxe-select-input\"\r\n      :disabled=\"componentDisabled\">\r\n      <a-icon slot=\"prefix\" type=\"user\" title=\"用户选择控件\"/>\r\n    </a-input>\r\n    <j-select-user-by-dep-modal\r\n      ref=\"selectModal\"\r\n      :modal-width=\"modalWidth\"\r\n      :multi=\"multi\"\r\n      :user-ids=\"userIds\"\r\n      @ok=\"selectOK\"\r\n      :store=\"storeField\"\r\n      :text=\"textField\"\r\n      @initComp=\"initComp\"/>\r\n    <span style=\"display: inline-block;height:100%;padding-left:14px\" v-if=\"userIds\" >\r\n      <span @click=\"openSelect\" style=\"display: inline-block;vertical-align: middle\">{{ userNames }}</span>\r\n      <a-icon v-if=\"!componentDisabled\" style=\"margin-left:5px;vertical-align: middle\" type=\"close-circle\" @click=\"handleEmpty\" title=\"清空\"/>\r\n    </span>\r\n  </div>\r\n\r\n <!-- <j-select-user-by-dep\r\n    v-bind=\"custProps\"\r\n    @change=\"handleChange\"\r\n    :trigger-change=\"true\">\r\n  </j-select-user-by-dep>-->\r\n</template>\r\n\r\n<script>\r\n  import JVxeCellMixins, { dispatchEvent } from '@/components/jeecg/JVxeTable/mixins/JVxeCellMixins'\r\n  import JSelectUserByDepModal from '@/components/jeecgbiz/modal/JSelectUserByDepModal'\r\n\r\n  export default {\r\n    name: 'JVxeUserSelectCell',\r\n    mixins: [JVxeCellMixins],\r\n    components: { JSelectUserByDepModal },\r\n    data() {\r\n      return {\r\n        userIds:'',\r\n        userNames:'',\r\n        innerUserValue: '',\r\n        selectedOptions: []\r\n      }\r\n    },\r\n    computed: {\r\n      custProps() {\r\n        const {userIds, originColumn: col, caseId, cellProps} = this\r\n        return {\r\n          ...cellProps,\r\n          value: userIds,\r\n          field: col.field || col.key,\r\n          groupId: caseId,\r\n          class: 'jvxe-select'\r\n        }\r\n      },\r\n      componentDisabled(){\r\n        console.log('333',this.cellProps)\r\n        if(this.cellProps.disabled==true){\r\n          return true\r\n        }\r\n        return false\r\n      },\r\n      modalWidth(){\r\n        if(this.cellProps.modalWidth){\r\n          return this.cellProps.modalWidth\r\n        }else{\r\n          return 1250\r\n        }\r\n      },\r\n      multi(){\r\n        if(this.cellProps.multi==false){\r\n          return false\r\n        }else{\r\n          return true\r\n        }\r\n      },\r\n      storeField(){\r\n        if(this.originColumn){\r\n          const str = this.originColumn.fieldExtendJson\r\n          if(str){\r\n            let json = JSON.parse(str)\r\n            if(json && json.store){\r\n              return json.store\r\n            }\r\n          }\r\n        }\r\n        return 'username'\r\n      },\r\n      textField(){\r\n        if(this.originColumn){\r\n          const str = this.originColumn.fieldExtendJson\r\n          if(str){\r\n            let json = JSON.parse(str)\r\n            if(json && json.text){\r\n              return json.text\r\n            }\r\n          }\r\n        }\r\n        return 'realname'\r\n      }\r\n    },\r\n    watch: {\r\n      innerValue: {\r\n        immediate: true,\r\n        handler(val) {\r\n          if (val == null || val === '') {\r\n            this.userIds = ''\r\n          } else {\r\n            this.userIds = val\r\n          }\r\n        }\r\n      }\r\n    },\r\n    methods: {\r\n      openSelect() {\r\n        // disabled 不弹窗\r\n        if (this.componentDisabled) {\r\n          return\r\n        }\r\n        this.$refs.selectModal.showModal()\r\n      },\r\n      selectOK(rows, idstr) {\r\n        console.log(\"当前选中用户\", rows)\r\n        console.log(\"当前选中用户ID\", idstr)\r\n        if (!rows) {\r\n          this.userNames = ''\r\n          this.userIds = ''\r\n        } else {\r\n          this.userIds = rows.map(row => row[this.storeField]).join(',')\r\n          this.userNames = rows.map(row => row[this.textField]).join(',')\r\n        }\r\n        this.handleChangeCommon(this.userIds)\r\n      },\r\n      handleEmpty(){\r\n        this.selectOK('')\r\n      },\r\n      initComp(userNames) {\r\n        this.userNames = userNames\r\n      },\r\n    },\r\n    enhanced: {\r\n      switches: {\r\n        visible: true\r\n      },\r\n      translate: {\r\n        enabled: false\r\n      }\r\n    }\r\n  }\r\n</script>\r\n\r\n<style scoped>\r\n  /deep/ .jvxe-select-input .ant-input {\r\n    border: none !important;\r\n  }\r\n</style>"]}]}