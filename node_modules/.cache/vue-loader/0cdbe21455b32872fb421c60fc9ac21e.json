{"remainingRequest":"D:\\a\\ant-design-vue-jeecg\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\a\\ant-design-vue-jeecg\\src\\components\\jeecg\\JModal\\JModal.vue?vue&type=style&index=0&lang=less&","dependencies":[{"path":"D:\\a\\ant-design-vue-jeecg\\src\\components\\jeecg\\JModal\\JModal.vue","mtime":1661074531180},{"path":"D:\\a\\ant-design-vue-jeecg\\node_modules\\css-loader\\index.js","mtime":1657458574837},{"path":"D:\\a\\ant-design-vue-jeecg\\node_modules\\vue-loader\\lib\\loaders\\stylePostLoader.js","mtime":1657458571653},{"path":"D:\\a\\ant-design-vue-jeecg\\node_modules\\postcss-loader\\src\\index.js","mtime":1657458638287},{"path":"D:\\a\\ant-design-vue-jeecg\\node_modules\\less-loader\\dist\\cjs.js","mtime":1657458655181},{"path":"D:\\a\\ant-design-vue-jeecg\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1657458637011},{"path":"D:\\a\\ant-design-vue-jeecg\\node_modules\\vue-loader\\lib\\index.js","mtime":1657458571653}],"contextDependencies":[],"result":["\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n.j-modal-box {\n  &.fullscreen {\n    top: 0;\n    left: 0;\n    padding: 0;\n\n    // 兼容1.6.2版本的antdv\n    & .ant-modal {\n      top: 0;\n      padding: 0;\n      height: 100vh;\n    }\n\n    & .ant-modal-content {\n      height: 100vh;\n      border-radius: 0;\n\n      & .ant-modal-body {\n        /* title 和 footer 各占 55px */\n        height: calc(100% - 55px - 55px);\n        overflow: auto;\n      }\n    }\n\n    &.no-title, &.no-footer {\n      .ant-modal-body {\n        height: calc(100% - 55px);\n      }\n    }\n    &.no-title.no-footer {\n      .ant-modal-body {\n        height: 100%;\n      }\n    }\n  }\n\n  .j-modal-title-row {\n    .left {\n      width: calc(100% - 56px - 56px);\n    }\n\n    .right {\n      width: 56px;\n      position: inherit;\n\n      .ant-modal-close {\n        right: 56px;\n        color: rgba(0, 0, 0, 0.45);\n\n        &:hover {\n          color: rgba(0, 0, 0, 0.75);\n        }\n      }\n    }\n  }\n  &.no-title{\n    .ant-modal-header {\n      padding: 0px 24px;\n      border-bottom: 0px !important;\n    }\n  }\n}\n\n@media (max-width: 767px) {\n  .j-modal-box.fullscreen {\n    margin: 0;\n    max-width: 100vw;\n  }\n}\n",{"version":3,"sources":["JModal.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA+LA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA","file":"JModal.vue","sourceRoot":"src/components/jeecg/JModal","sourcesContent":["<template>\r\n  <a-modal\r\n    ref=\"modal\"\r\n    :class=\"getClass(modalClass)\"\r\n    :style=\"getStyle(modalStyle)\"\r\n    :visible=\"visible\"\r\n    v-bind=\"_attrs\"\r\n    v-on=\"$listeners\"\r\n    @ok=\"handleOk\"\r\n    @cancel=\"handleCancel\"\r\n    :destroyOnClose=\"destroyOnClose\"\r\n  >\r\n\r\n    <slot></slot>\r\n    <!--有设置标题-->\r\n    <template v-if=\"!isNoTitle\" slot=\"title\">\r\n      <a-row class=\"j-modal-title-row\" type=\"flex\">\r\n        <a-col class=\"left\">\r\n          <slot name=\"title\">{{ title }}</slot>\r\n        </a-col>\r\n        <a-col v-if=\"switchFullscreen\" class=\"right\" @click=\"toggleFullscreen\">\r\n          <a-button class=\"ant-modal-close ant-modal-close-x\" ghost type=\"link\" :icon=\"fullscreenButtonIcon\"/>\r\n        </a-col>\r\n      </a-row>\r\n    </template>\r\n    <!--没有设置标题-->\r\n    <template v-else slot=\"title\">\r\n      <a-row class=\"j-modal-title-row\" type=\"flex\">\r\n        <a-col v-if=\"switchFullscreen\" class=\"right\" @click=\"toggleFullscreen\">\r\n          <a-button class=\"ant-modal-close ant-modal-close-x\" ghost type=\"link\" :icon=\"fullscreenButtonIcon\"/>\r\n        </a-col>\r\n      </a-row>\r\n    </template>\r\n\r\n    <!-- 处理 scopedSlots -->\r\n    <template v-for=\"slotName of scopedSlotsKeys\" :slot=\"slotName\">\r\n      <slot :name=\"slotName\"></slot>\r\n    </template>\r\n\r\n    <!-- 处理 slots -->\r\n    <template v-for=\"slotName of slotsKeys\" v-slot:[slotName]>\r\n      <slot :name=\"slotName\"></slot>\r\n    </template>\r\n\r\n  </a-modal>\r\n</template>\r\n\r\n<script>\r\n\r\nimport { getClass, getStyle } from '@/utils/props-util'\r\nimport { triggerWindowResizeEvent } from '@/utils/util'\r\nimport ModalDragMixins from './ModalDragMixins'\r\n\r\nexport default {\r\n    name: 'JModal',\r\n    mixins: [ModalDragMixins],\r\n    props: {\r\n      title: String,\r\n      // 可使用 .sync 修饰符\r\n      visible: Boolean,\r\n      // 是否开启拖拽\r\n      draggable: Boolean,\r\n      // 是否全屏弹窗，当全屏时无论如何都会禁止 body 滚动。可使用 .sync 修饰符\r\n      fullscreen: {\r\n        type: Boolean,\r\n        default: false\r\n      },\r\n      // 是否允许切换全屏（允许后右上角会出现一个按钮）\r\n      switchFullscreen: {\r\n        type: Boolean,\r\n        default: false\r\n      },\r\n      // 点击确定按钮的时候是否关闭弹窗\r\n      okClose: {\r\n        type: Boolean,\r\n        default: true\r\n      },\r\n      // 关闭时销毁弹窗内容\r\n      destroyOnClose: {\r\n        type: Boolean,\r\n        default: true\r\n      },\r\n    },\r\n    data() {\r\n      return {\r\n        // 内部使用的 slots ，不再处理\r\n        usedSlots: ['title'],\r\n        // 实际控制是否全屏的参数\r\n        innerFullscreen: this.fullscreen,\r\n      }\r\n    },\r\n    computed: {\r\n      // 一些未处理的参数或特殊处理的参数绑定到 a-modal 上\r\n      _attrs() {\r\n        let attrs = { ...this.$attrs }\r\n        // 如果全屏就将宽度设为 100%\r\n        if (this.innerFullscreen) {\r\n          attrs['width'] = '100%'\r\n        }\r\n        return attrs\r\n      },\r\n      modalClass() {\r\n        return {\r\n          'j-modal-box': true,\r\n          'fullscreen': this.innerFullscreen,\r\n          'no-title': this.isNoTitle,\r\n          'no-footer': this.isNoFooter,\r\n        }\r\n      },\r\n      modalStyle() {\r\n        let style = {}\r\n        // 如果全屏就将top设为 0\r\n        if (this.innerFullscreen) {\r\n          style['top'] = '0'\r\n        }\r\n        return style\r\n      },\r\n      isNoTitle() {\r\n        return !this.title && !this.allSlotsKeys.includes('title')\r\n      },\r\n      isNoFooter() {\r\n        return this._attrs['footer'] === null\r\n      },\r\n      slotsKeys() {\r\n        return Object.keys(this.$slots).filter(key => !this.usedSlots.includes(key))\r\n      },\r\n      scopedSlotsKeys() {\r\n        return Object.keys(this.$scopedSlots).filter(key => !this.usedSlots.includes(key))\r\n      },\r\n      allSlotsKeys() {\r\n        return Object.keys(this.$slots).concat(Object.keys(this.$scopedSlots))\r\n      },\r\n      // 切换全屏的按钮图标\r\n      fullscreenButtonIcon() {\r\n        return this.innerFullscreen ? 'fullscreen-exit' : 'fullscreen'\r\n      },\r\n    },\r\n    watch: {\r\n      visible() {\r\n        if (this.visible) {\r\n          this.innerFullscreen = this.fullscreen\r\n        }\r\n      },\r\n      innerFullscreen(val) {\r\n        this.$emit('update:fullscreen', val)\r\n      },\r\n    },\r\n    methods: {\r\n\r\n      getClass(clazz) {\r\n        return { ...getClass(this), ...clazz }\r\n      },\r\n      getStyle(style) {\r\n        return { ...getStyle(this), ...style }\r\n      },\r\n\r\n      close() {\r\n        this.$emit('update:visible', false)\r\n      },\r\n\r\n      handleOk() {\r\n        if (this.okClose) {\r\n          this.close()\r\n        }\r\n      },\r\n      handleCancel() {\r\n        this.close()\r\n      },\r\n\r\n      /** 切换全屏 */\r\n      toggleFullscreen() {\r\n        this.innerFullscreen = !this.innerFullscreen\r\n        triggerWindowResizeEvent()\r\n        // 全屏的时候禁止拖动\r\n        if (this.innerFullscreen) {\r\n          // 还原弹窗的位置为0,0\r\n          this.setModalPosition(0, 0, false)\r\n          this.dragSettings.headerEl.style.cursor = null\r\n        } else {\r\n          // 取消全屏的时候，将弹窗移动到上次记录的位置\r\n          this.resetModalPosition()\r\n          this.dragSettings.headerEl.style.cursor = 'move'\r\n        }\r\n      },\r\n\r\n    }\r\n  }\r\n</script>\r\n\r\n<style lang=\"less\">\r\n  \r\n  .j-modal-box {\r\n    &.fullscreen {\r\n      top: 0;\r\n      left: 0;\r\n      padding: 0;\r\n\r\n      // 兼容1.6.2版本的antdv\r\n      & .ant-modal {\r\n        top: 0;\r\n        padding: 0;\r\n        height: 100vh;\r\n      }\r\n\r\n      & .ant-modal-content {\r\n        height: 100vh;\r\n        border-radius: 0;\r\n\r\n        & .ant-modal-body {\r\n          /* title 和 footer 各占 55px */\r\n          height: calc(100% - 55px - 55px);\r\n          overflow: auto;\r\n        }\r\n      }\r\n\r\n      &.no-title, &.no-footer {\r\n        .ant-modal-body {\r\n          height: calc(100% - 55px);\r\n        }\r\n      }\r\n      &.no-title.no-footer {\r\n        .ant-modal-body {\r\n          height: 100%;\r\n        }\r\n      }\r\n    }\r\n\r\n    .j-modal-title-row {\r\n      .left {\r\n        width: calc(100% - 56px - 56px);\r\n      }\r\n\r\n      .right {\r\n        width: 56px;\r\n        position: inherit;\r\n\r\n        .ant-modal-close {\r\n          right: 56px;\r\n          color: rgba(0, 0, 0, 0.45);\r\n\r\n          &:hover {\r\n            color: rgba(0, 0, 0, 0.75);\r\n          }\r\n        }\r\n      }\r\n    }\r\n    &.no-title{\r\n      .ant-modal-header {\r\n        padding: 0px 24px;\r\n        border-bottom: 0px !important;\r\n      }\r\n    }\r\n  }\r\n\r\n  @media (max-width: 767px) {\r\n    .j-modal-box.fullscreen {\r\n      margin: 0;\r\n      max-width: 100vw;\r\n    }\r\n  }\r\n</style>"]}]}